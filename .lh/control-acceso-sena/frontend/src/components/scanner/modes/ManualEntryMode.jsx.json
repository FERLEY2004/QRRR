{
    "sourceFile": "control-acceso-sena/frontend/src/components/scanner/modes/ManualEntryMode.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1764109099642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1764109099642,
            "name": "Commit-0",
            "content": "// ManualEntryMode - Modo de entrada manual de documento\r\nimport React, { useState } from 'react';\r\n\r\nconst ManualEntryMode = ({ onProcess, onClose, loading = false }) => {\r\n  const [documento, setDocumento] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (!documento.trim()) {\r\n      setError('Por favor ingrese un n√∫mero de documento');\r\n      return;\r\n    }\r\n\r\n    // Validar formato b√°sico\r\n    if (!/^[0-9]{6,12}$/.test(documento.trim())) {\r\n      setError('El documento debe tener entre 6 y 12 d√≠gitos');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Crear QR data manualmente\r\n      const qrData = JSON.stringify({\r\n        type: 'person',\r\n        documento: documento.trim(),\r\n        timestamp: new Date().toISOString(),\r\n        manual: true\r\n      });\r\n\r\n      await onProcess(qrData);\r\n      setDocumento('');\r\n    } catch (error) {\r\n      setError(error.message || 'Error al procesar documento');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-xl font-bold text-gray-800\">Ingreso y Salida Manual</h3>\r\n        {onClose && (\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-500 hover:text-gray-700\"\r\n          >\r\n            ‚úï\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            N√∫mero de Documento\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={documento}\r\n            onChange={(e) => {\r\n              setDocumento(e.target.value);\r\n              setError('');\r\n            }}\r\n            placeholder=\"Ej: 1234567890\"\r\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-lg\"\r\n            disabled={loading}\r\n            autoFocus\r\n          />\r\n          {error && (\r\n            <p className=\"mt-2 text-sm text-red-600\">{error}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading || !documento.trim()}\r\n            className=\"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\r\n                <span>Procesando...</span>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                </svg>\r\n                <span>Buscar</span>\r\n              </>\r\n            )}\r\n          </button>\r\n          {onClose && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-6 py-3 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50 transition\"\r\n            >\r\n              Cancelar\r\n            </button>\r\n          )}\r\n        </div>\r\n      </form>\r\n\r\n      <div className=\"mt-4 p-3 bg-blue-50 rounded-lg\">\r\n        <p className=\"text-sm text-blue-800\">\r\n          üí° <strong>Consejo:</strong> Use este modo cuando el c√≥digo QR no se pueda escanear o est√© da√±ado.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManualEntryMode;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"
        }
    ]
}