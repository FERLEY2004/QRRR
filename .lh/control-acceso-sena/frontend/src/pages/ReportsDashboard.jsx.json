{
    "sourceFile": "control-acceso-sena/frontend/src/pages/ReportsDashboard.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1764021641502,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764024063866,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,8 +22,23 @@\n         { key: 'fecha_entrada', label: 'Fecha Entrada' },\n         { key: 'tiempo_dentro', label: 'Tiempo Dentro' }\n       ],\n       availableFilters: ['rol', 'zona']\n+    },\n+    'access-history': {\n+      title: 'Historial de Accesos',\n+      endpoint: 'access-history',\n+      columns: [\n+        { key: 'documento', label: 'Documento' },\n+        { key: 'nombre_completo', label: 'Nombre' },\n+        { key: 'rol', label: 'Rol' },\n+        { key: 'tipo_acceso', label: 'Tipo' },\n+        { key: 'fecha_entrada', label: 'Fecha Entrada' },\n+        { key: 'fecha_salida', label: 'Fecha Salida' },\n+        { key: 'duracion_minutos', label: 'DuraciÃ³n (min)' },\n+        { key: 'estado', label: 'Estado' }\n+      ],\n+      availableFilters: ['fecha_desde', 'fecha_hasta', 'documento', 'rol', 'tipo_acceso']\n     }\n   };\n \n   const { data, loading, error, updateFilters, refresh } = useReports(\n"
                },
                {
                    "date": 1764024098820,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,23 +22,8 @@\n         { key: 'fecha_entrada', label: 'Fecha Entrada' },\n         { key: 'tiempo_dentro', label: 'Tiempo Dentro' }\n       ],\n       availableFilters: ['rol', 'zona']\n-    },\n-    'access-history': {\n-      title: 'Historial de Accesos',\n-      endpoint: 'access-history',\n-      columns: [\n-        { key: 'documento', label: 'Documento' },\n-        { key: 'nombre_completo', label: 'Nombre' },\n-        { key: 'rol', label: 'Rol' },\n-        { key: 'tipo_acceso', label: 'Tipo' },\n-        { key: 'fecha_entrada', label: 'Fecha Entrada' },\n-        { key: 'fecha_salida', label: 'Fecha Salida' },\n-        { key: 'duracion_minutos', label: 'DuraciÃ³n (min)' },\n-        { key: 'estado', label: 'Estado' }\n-      ],\n-      availableFilters: ['fecha_desde', 'fecha_hasta', 'documento', 'rol', 'tipo_acceso']\n     }\n   };\n \n   const { data, loading, error, updateFilters, refresh } = useReports(\n"
                },
                {
                    "date": 1764100813946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n import AdvancedFilters from '../components/reports/AdvancedFilters.jsx';\n import DataTable from '../components/reports/DataTable.jsx';\n import ExportButtons from '../components/reports/ExportButtons.jsx';\n import MetricCard from '../components/MetricCard.jsx';\n+import logo from '../photos/Huella.png';\n \n const ReportsDashboard = () => {\n   const [activeReport, setActiveReport] = useState('current-people');\n   const [filters, setFilters] = useState({});\n@@ -48,10 +49,15 @@\n     <div className=\"min-h-screen bg-gray-100 p-4 md:p-6\">\n       <div className=\"max-w-7xl mx-auto\">\n         {/* Header */}\n         <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n-          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Reportes del Sistema</h1>\n-          <p className=\"text-gray-600\">Consulta y analiza los datos de acceso del sistema</p>\n+          <div className=\"flex items-center gap-4\">\n+            <img src={logo} alt=\"Logo SENA\" className=\"h-12 w-12 object-contain\" />\n+            <div>\n+              <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Reportes del Sistema</h1>\n+              <p className=\"text-gray-600\">Consulta y analiza los datos de acceso del sistema</p>\n+            </div>\n+          </div>\n         </div>\n \n         {/* Selector de reportes */}\n         <div className=\"bg-white rounded-lg shadow-md p-4 mb-6\">\n"
                },
                {
                    "date": 1764102796102,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,8 @@\n import AdvancedFilters from '../components/reports/AdvancedFilters.jsx';\n import DataTable from '../components/reports/DataTable.jsx';\n import ExportButtons from '../components/reports/ExportButtons.jsx';\n import MetricCard from '../components/MetricCard.jsx';\n-import logo from '../photos/Huella.png';\n \n const ReportsDashboard = () => {\n   const [activeReport, setActiveReport] = useState('current-people');\n   const [filters, setFilters] = useState({});\n@@ -49,15 +48,10 @@\n     <div className=\"min-h-screen bg-gray-100 p-4 md:p-6\">\n       <div className=\"max-w-7xl mx-auto\">\n         {/* Header */}\n         <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n-          <div className=\"flex items-center gap-4\">\n-            <img src={logo} alt=\"Logo SENA\" className=\"h-12 w-12 object-contain\" />\n-            <div>\n-              <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Reportes del Sistema</h1>\n-              <p className=\"text-gray-600\">Consulta y analiza los datos de acceso del sistema</p>\n-            </div>\n-          </div>\n+          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Reportes del Sistema</h1>\n+          <p className=\"text-gray-600\">Consulta y analiza los datos de acceso del sistema</p>\n         </div>\n \n         {/* Selector de reportes */}\n         <div className=\"bg-white rounded-lg shadow-md p-4 mb-6\">\n"
                }
            ],
            "date": 1764021641502,
            "name": "Commit-0",
            "content": "// ReportsDashboard - Dashboard principal de reportes\nimport React, { useState } from 'react';\nimport { useReports } from '../hooks/useReports.js';\nimport AdvancedFilters from '../components/reports/AdvancedFilters.jsx';\nimport DataTable from '../components/reports/DataTable.jsx';\nimport ExportButtons from '../components/reports/ExportButtons.jsx';\nimport MetricCard from '../components/MetricCard.jsx';\n\nconst ReportsDashboard = () => {\n  const [activeReport, setActiveReport] = useState('current-people');\n  const [filters, setFilters] = useState({});\n\n  const reportConfigs = {\n    'current-people': {\n      title: 'Personas Actualmente Dentro',\n      endpoint: 'current-people',\n      columns: [\n        { key: 'documento', label: 'Documento' },\n        { key: 'nombre_completo', label: 'Nombre Completo' },\n        { key: 'rol', label: 'Rol' },\n        { key: 'zona', label: 'Zona' },\n        { key: 'fecha_entrada', label: 'Fecha Entrada' },\n        { key: 'tiempo_dentro', label: 'Tiempo Dentro' }\n      ],\n      availableFilters: ['rol', 'zona']\n    }\n  };\n\n  const { data, loading, error, updateFilters, refresh } = useReports(\n    reportConfigs[activeReport]?.endpoint || 'current-people',\n    filters\n  );\n\n  const handleFilterChange = (newFilters) => {\n    setFilters(newFilters);\n    updateFilters(newFilters);\n  };\n\n  const handlePageChange = (page) => {\n    updateFilters({ ...filters, page });\n  };\n\n  const handleExport = (format) => {\n    console.log(`Exportando a ${format}...`);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4 md:p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Reportes del Sistema</h1>\n          <p className=\"text-gray-600\">Consulta y analiza los datos de acceso del sistema</p>\n        </div>\n\n        {/* Selector de reportes */}\n        <div className=\"bg-white rounded-lg shadow-md p-4 mb-6\">\n          <div className=\"flex flex-wrap gap-2\">\n            {Object.entries(reportConfigs).map(([key, config]) => (\n              <button\n                key={key}\n                onClick={() => {\n                  setActiveReport(key);\n                  setFilters({});\n                }}\n                className={`px-4 py-2 rounded-lg font-semibold transition-colors ${\n                  activeReport === key\n                    ? 'bg-blue-600 text-white'\n                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                }`}\n              >\n                {config.title}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Filtros */}\n        <AdvancedFilters\n          onFilter={handleFilterChange}\n          availableFilters={reportConfigs[activeReport]?.availableFilters || []}\n          initialFilters={filters}\n        />\n\n        {/* MÃ©tricas resumen */}\n        {data && data.data && (\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n            <MetricCard\n              title=\"Total Registros\"\n              value={data.total || data.data.length}\n              icon=\"ðŸ“Š\"\n            />\n            {data.periodo && (\n              <>\n                <MetricCard\n                  title=\"Desde\"\n                  value={new Date(data.periodo.fecha_desde).toLocaleDateString('es-CO')}\n                  icon=\"ðŸ“…\"\n                />\n                <MetricCard\n                  title=\"Hasta\"\n                  value={new Date(data.periodo.fecha_hasta).toLocaleDateString('es-CO')}\n                  icon=\"ðŸ“…\"\n                />\n              </>\n            )}\n          </div>\n        )}\n\n        {/* Contenido principal */}\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-2xl font-bold text-gray-800\">\n              {reportConfigs[activeReport]?.title}\n            </h2>\n            <ExportButtons\n              reportType={activeReport}\n              filters={filters}\n              data={data}\n              onExportComplete={handleExport}\n            />\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4\">\n              {error}\n            </div>\n          )}\n\n          <DataTable\n            data={data?.data || []}\n            columns={reportConfigs[activeReport]?.columns || []}\n            pagination={data?.pagination}\n            onPageChange={handlePageChange}\n            loading={loading}\n            emptyMessage={`No hay datos disponibles para ${reportConfigs[activeReport]?.title}`}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportsDashboard;\n\n\n"
        }
    ]
}