{
    "sourceFile": "control-acceso-sena/frontend/src/pages/ProgramCatalog.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1764110063756,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764110482729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,8 +16,9 @@\n   const [loadingStudents, setLoadingStudents] = useState(false);\r\n   const [accessProgram, setAccessProgram] = useState(null);\r\n   const [accesses, setAccesses] = useState([]);\r\n   const [loadingAccesses, setLoadingAccesses] = useState(false);\r\n+  const [notification, setNotification] = useState(null);\r\n \r\n   useEffect(() => {\r\n     loadPrograms();\r\n   }, [filters]);\r\n@@ -58,26 +59,96 @@\n   const handleViewAccess = async (program) => {\r\n     setAccessProgram(program);\r\n     setLoadingAccesses(true);\r\n     setAccesses([]);\r\n+    setNotification(null);\r\n     try {\r\n       const result = await catalogAPI.getAccessByProgram(program.codigo_programa);\r\n       if (result.success) {\r\n-        setAccesses(result.data || []);\r\n+        const accessData = result.data || [];\r\n+        setAccesses(accessData);\r\n+        \r\n+        // Mostrar notificaci√≥n si no hay accesos\r\n+        if (accessData.length === 0) {\r\n+          setNotification({\r\n+            type: 'info',\r\n+            message: 'No hay accesos registrados para este programa de formaci√≥n'\r\n+          });\r\n+          // Auto-cerrar la notificaci√≥n despu√©s de 5 segundos\r\n+          setTimeout(() => {\r\n+            setNotification(null);\r\n+          }, 5000);\r\n+        }\r\n       } else {\r\n         console.error('Error obteniendo accesos:', result.message);\r\n         setAccesses([]);\r\n+        setNotification({\r\n+          type: 'error',\r\n+          message: result.message || 'Error al obtener accesos'\r\n+        });\r\n+        setTimeout(() => {\r\n+          setNotification(null);\r\n+        }, 5000);\r\n       }\r\n     } catch (error) {\r\n       console.error('Error cargando accesos:', error);\r\n       setAccesses([]);\r\n+      setNotification({\r\n+        type: 'error',\r\n+        message: 'Error al cargar los accesos del programa'\r\n+      });\r\n+      setTimeout(() => {\r\n+        setNotification(null);\r\n+      }, 5000);\r\n     } finally {\r\n       setLoadingAccesses(false);\r\n     }\r\n   };\r\n \r\n   return (\r\n     <div className=\"min-h-screen bg-gray-50 p-6\">\r\n+      {/* Notificaci√≥n */}\r\n+      {notification && (\r\n+        <div \r\n+          className={`fixed top-4 right-4 z-50 max-w-md transform transition-all duration-300 ease-in-out ${\r\n+            notification.type === 'error' \r\n+              ? 'bg-red-50 border-red-400 text-red-800' \r\n+              : 'bg-blue-50 border-blue-400 text-blue-800'\r\n+          } border-2 rounded-lg shadow-lg p-4 flex items-start gap-3 animate-fade-in`}\r\n+          style={{\r\n+            animation: 'slideInRight 0.3s ease-out'\r\n+          }}\r\n+        >\r\n+          <div className=\"flex-shrink-0 text-xl\">\r\n+            {notification.type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}\r\n+          </div>\r\n+          <div className=\"flex-1\">\r\n+            <p className=\"font-semibold\">{notification.message}</p>\r\n+          </div>\r\n+          <button\r\n+            onClick={() => setNotification(null)}\r\n+            className=\"flex-shrink-0 text-gray-500 hover:text-gray-700 transition-colors\"\r\n+          >\r\n+            ‚úï\r\n+          </button>\r\n+          <style>{`\r\n+            @keyframes slideInRight {\r\n+              from {\r\n+                transform: translateX(100%);\r\n+                opacity: 0;\r\n+              }\r\n+              to {\r\n+                transform: translateX(0);\r\n+                opacity: 1;\r\n+              }\r\n+            }\r\n+            .animate-fade-in {\r\n+              animation: slideInRight 0.3s ease-out;\r\n+            }\r\n+          `}</style>\r\n+        </div>\r\n+      )}\r\n+      \r\n       <div className=\"max-w-7xl mx-auto\">\r\n         <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\r\n           <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">\r\n             üìö Cat√°logo de Programas de Formaci√≥n - CBI Palmira\r\n"
                },
                {
                    "date": 1764308668660,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,479 +1,613 @@\n-// ProgramCatalog - Cat√°logo de programas de formaci√≥n\r\n-import React, { useState, useEffect } from 'react';\r\n-import { catalogAPI } from '../services/api.js';\r\n-\r\n-const ProgramCatalog = () => {\r\n-  const [programs, setPrograms] = useState([]);\r\n-  const [loading, setLoading] = useState(true);\r\n-  const [filters, setFilters] = useState({\r\n-    nivel: '',\r\n-    area: '',\r\n-    estado: 'activo',\r\n-    search: ''\r\n-  });\r\n-  const [selectedProgram, setSelectedProgram] = useState(null);\r\n-  const [students, setStudents] = useState([]);\r\n-  const [loadingStudents, setLoadingStudents] = useState(false);\r\n-  const [accessProgram, setAccessProgram] = useState(null);\r\n-  const [accesses, setAccesses] = useState([]);\r\n-  const [loadingAccesses, setLoadingAccesses] = useState(false);\r\n-  const [notification, setNotification] = useState(null);\r\n-\r\n-  useEffect(() => {\r\n-    loadPrograms();\r\n-  }, [filters]);\r\n-\r\n-  const loadPrograms = async () => {\r\n-    try {\r\n-      setLoading(true);\r\n-      const result = await catalogAPI.getAllPrograms(filters);\r\n-      if (result.success) {\r\n-        setPrograms(result.data || []);\r\n-      }\r\n-    } catch (error) {\r\n-      console.error('Error cargando programas:', error);\r\n-    } finally {\r\n-      setLoading(false);\r\n-    }\r\n-  };\r\n-\r\n-  const handleFilterChange = (key, value) => {\r\n-    setFilters(prev => ({ ...prev, [key]: value }));\r\n-  };\r\n-\r\n-  const handleProgramClick = async (program) => {\r\n-    setSelectedProgram(program);\r\n-    setLoadingStudents(true);\r\n-    try {\r\n-      const result = await catalogAPI.getStudentsByProgram(program.codigo_programa);\r\n-      if (result.success) {\r\n-        setStudents(result.data || []);\r\n-      }\r\n-    } catch (error) {\r\n-      console.error('Error cargando estudiantes:', error);\r\n-    } finally {\r\n-      setLoadingStudents(false);\r\n-    }\r\n-  };\r\n-\r\n-  const handleViewAccess = async (program) => {\r\n-    setAccessProgram(program);\r\n-    setLoadingAccesses(true);\r\n-    setAccesses([]);\r\n-    setNotification(null);\r\n-    try {\r\n-      const result = await catalogAPI.getAccessByProgram(program.codigo_programa);\r\n-      if (result.success) {\r\n-        const accessData = result.data || [];\r\n-        setAccesses(accessData);\r\n-        \r\n-        // Mostrar notificaci√≥n si no hay accesos\r\n-        if (accessData.length === 0) {\r\n-          setNotification({\r\n-            type: 'info',\r\n-            message: 'No hay accesos registrados para este programa de formaci√≥n'\r\n-          });\r\n-          // Auto-cerrar la notificaci√≥n despu√©s de 5 segundos\r\n-          setTimeout(() => {\r\n-            setNotification(null);\r\n-          }, 5000);\r\n-        }\r\n-      } else {\r\n-        console.error('Error obteniendo accesos:', result.message);\r\n-        setAccesses([]);\r\n-        setNotification({\r\n-          type: 'error',\r\n-          message: result.message || 'Error al obtener accesos'\r\n-        });\r\n-        setTimeout(() => {\r\n-          setNotification(null);\r\n-        }, 5000);\r\n-      }\r\n-    } catch (error) {\r\n-      console.error('Error cargando accesos:', error);\r\n-      setAccesses([]);\r\n-      setNotification({\r\n-        type: 'error',\r\n-        message: 'Error al cargar los accesos del programa'\r\n-      });\r\n-      setTimeout(() => {\r\n-        setNotification(null);\r\n-      }, 5000);\r\n-    } finally {\r\n-      setLoadingAccesses(false);\r\n-    }\r\n-  };\r\n-\r\n-  return (\r\n-    <div className=\"min-h-screen bg-gray-50 p-6\">\r\n-      {/* Notificaci√≥n */}\r\n-      {notification && (\r\n-        <div \r\n-          className={`fixed top-4 right-4 z-50 max-w-md transform transition-all duration-300 ease-in-out ${\r\n-            notification.type === 'error' \r\n-              ? 'bg-red-50 border-red-400 text-red-800' \r\n-              : 'bg-blue-50 border-blue-400 text-blue-800'\r\n-          } border-2 rounded-lg shadow-lg p-4 flex items-start gap-3 animate-fade-in`}\r\n-          style={{\r\n-            animation: 'slideInRight 0.3s ease-out'\r\n-          }}\r\n-        >\r\n-          <div className=\"flex-shrink-0 text-xl\">\r\n-            {notification.type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}\r\n-          </div>\r\n-          <div className=\"flex-1\">\r\n-            <p className=\"font-semibold\">{notification.message}</p>\r\n-          </div>\r\n-          <button\r\n-            onClick={() => setNotification(null)}\r\n-            className=\"flex-shrink-0 text-gray-500 hover:text-gray-700 transition-colors\"\r\n-          >\r\n-            ‚úï\r\n-          </button>\r\n-          <style>{`\r\n-            @keyframes slideInRight {\r\n-              from {\r\n-                transform: translateX(100%);\r\n-                opacity: 0;\r\n-              }\r\n-              to {\r\n-                transform: translateX(0);\r\n-                opacity: 1;\r\n-              }\r\n-            }\r\n-            .animate-fade-in {\r\n-              animation: slideInRight 0.3s ease-out;\r\n-            }\r\n-          `}</style>\r\n-        </div>\r\n-      )}\r\n-      \r\n-      <div className=\"max-w-7xl mx-auto\">\r\n-        <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\r\n-          <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">\r\n-            üìö Cat√°logo de Programas de Formaci√≥n - CBI Palmira\r\n-          </h1>\r\n-\r\n-          {/* Filtros */}\r\n-          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n-            <div>\r\n-              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n-                Nivel\r\n-              </label>\r\n-              <select\r\n-                value={filters.nivel}\r\n-                onChange={(e) => handleFilterChange('nivel', e.target.value)}\r\n-                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n-              >\r\n-                <option value=\"\">Todos</option>\r\n-                <option value=\"T√©cnico\">T√©cnico</option>\r\n-                <option value=\"Tecnol√≥gico\">Tecnol√≥gico</option>\r\n-                <option value=\"Especializaci√≥n\">Especializaci√≥n</option>\r\n-              </select>\r\n-            </div>\r\n-\r\n-            <div>\r\n-              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n-                √Årea de Conocimiento\r\n-              </label>\r\n-              <input\r\n-                type=\"text\"\r\n-                value={filters.area}\r\n-                onChange={(e) => handleFilterChange('area', e.target.value)}\r\n-                placeholder=\"Ej: Desarrollo de Software\"\r\n-                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n-              />\r\n-            </div>\r\n-\r\n-            <div>\r\n-              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n-                Estado\r\n-              </label>\r\n-              <select\r\n-                value={filters.estado}\r\n-                onChange={(e) => handleFilterChange('estado', e.target.value)}\r\n-                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n-              >\r\n-                <option value=\"\">Todos</option>\r\n-                <option value=\"activo\">Activo</option>\r\n-                <option value=\"inactivo\">Inactivo</option>\r\n-              </select>\r\n-            </div>\r\n-\r\n-            <div>\r\n-              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n-                Buscar\r\n-              </label>\r\n-              <input\r\n-                type=\"text\"\r\n-                value={filters.search}\r\n-                onChange={(e) => handleFilterChange('search', e.target.value)}\r\n-                placeholder=\"C√≥digo o nombre...\"\r\n-                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n-              />\r\n-            </div>\r\n-          </div>\r\n-\r\n-          {/* Lista de programas */}\r\n-          {loading ? (\r\n-            <div className=\"text-center py-12\">\r\n-              <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\r\n-              <p className=\"mt-4 text-gray-600\">Cargando programas...</p>\r\n-            </div>\r\n-          ) : (\r\n-            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n-              {programs.map((program) => (\r\n-                <div\r\n-                  key={program.id_programa}\r\n-                  className=\"border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer\"\r\n-                  onClick={() => handleProgramClick(program)}\r\n-                >\r\n-                  <div className=\"flex justify-between items-start mb-2\">\r\n-                    <span className=\"text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded\">\r\n-                      {program.codigo_programa}\r\n-                    </span>\r\n-                    <span className={`text-xs px-2 py-1 rounded ${\r\n-                      program.nivel === 'T√©cnico' \r\n-                        ? 'bg-green-100 text-green-700' \r\n-                        : 'bg-purple-100 text-purple-700'\r\n-                    }`}>\r\n-                      {program.nivel}\r\n-                    </span>\r\n-                  </div>\r\n-                  <h3 className=\"font-semibold text-gray-800 mb-2\">\r\n-                    {program.nombre_programa}\r\n-                  </h3>\r\n-                  <p className=\"text-sm text-gray-600 mb-2\">\r\n-                    <span className=\"font-medium\">√Årea:</span> {program.area_conocimiento}\r\n-                  </p>\r\n-                  <p className=\"text-sm text-gray-600\">\r\n-                    <span className=\"font-medium\">Duraci√≥n:</span> {program.duracion_meses} meses\r\n-                  </p>\r\n-                  <div className=\"mt-3 flex gap-2\">\r\n-                    <button\r\n-                      onClick={(e) => {\r\n-                        e.stopPropagation();\r\n-                        handleViewAccess(program);\r\n-                      }}\r\n-                      className=\"text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600\"\r\n-                    >\r\n-                      Ver Accesos\r\n-                    </button>\r\n-                  </div>\r\n-                </div>\r\n-              ))}\r\n-            </div>\r\n-          )}\r\n-\r\n-          {!loading && programs.length === 0 && (\r\n-            <div className=\"text-center py-12 text-gray-500\">\r\n-              No se encontraron programas con los filtros seleccionados.\r\n-            </div>\r\n-          )}\r\n-        </div>\r\n-\r\n-        {/* Panel de estudiantes del programa seleccionado */}\r\n-        {selectedProgram && (\r\n-          <div className=\"bg-white rounded-lg shadow-md p-6 mt-6\">\r\n-            <div className=\"flex justify-between items-center mb-4\">\r\n-              <h2 className=\"text-2xl font-bold text-gray-800\">\r\n-                Aprendices - {selectedProgram.nombre_programa}\r\n-              </h2>\r\n-              <button\r\n-                onClick={() => setSelectedProgram(null)}\r\n-                className=\"text-gray-500 hover:text-gray-700\"\r\n-              >\r\n-                ‚úï\r\n-              </button>\r\n-            </div>\r\n-\r\n-            {loadingStudents ? (\r\n-              <div className=\"text-center py-8\">\r\n-                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"></div>\r\n-              </div>\r\n-            ) : (\r\n-              <div className=\"overflow-x-auto\">\r\n-                <table className=\"min-w-full divide-y divide-gray-200\">\r\n-                  <thead className=\"bg-gray-50\">\r\n-                    <tr>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Documento\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Nombre\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Ficha\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Estado\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        √öltimo Acceso\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Accesos (30 d√≠as)\r\n-                      </th>\r\n-                    </tr>\r\n-                  </thead>\r\n-                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n-                    {students.map((student) => (\r\n-                      <tr key={student.id_persona} className=\"hover:bg-gray-50\">\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n-                          {student.documento}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n-                          {student.nombre}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n-                          {student.ficha || 'N/A'}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm\">\r\n-                          <span className={`px-2 py-1 rounded text-xs ${\r\n-                            student.estado === 'activo'\r\n-                              ? 'bg-green-100 text-green-700'\r\n-                              : 'bg-red-100 text-red-700'\r\n-                          }`}>\r\n-                            {student.estado}\r\n-                          </span>\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n-                          {student.ultimo_acceso\r\n-                            ? new Date(student.ultimo_acceso).toLocaleDateString('es-CO')\r\n-                            : 'Nunca'}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n-                          {student.accesos_mes || 0}\r\n-                        </td>\r\n-                      </tr>\r\n-                    ))}\r\n-                  </tbody>\r\n-                </table>\r\n-                {students.length === 0 && (\r\n-                  <div className=\"text-center py-8 text-gray-500\">\r\n-                    No hay aprendices registrados en este programa.\r\n-                  </div>\r\n-                )}\r\n-              </div>\r\n-            )}\r\n-          </div>\r\n-        )}\r\n-\r\n-        {/* Panel de accesos del programa */}\r\n-        {accessProgram && (\r\n-          <div className=\"bg-white rounded-lg shadow-md p-6 mt-6\">\r\n-            <div className=\"flex justify-between items-center mb-4\">\r\n-              <h2 className=\"text-2xl font-bold text-gray-800\">\r\n-                Accesos - {accessProgram.nombre_programa}\r\n-              </h2>\r\n-              <button\r\n-                onClick={() => {\r\n-                  setAccessProgram(null);\r\n-                  setAccesses([]);\r\n-                }}\r\n-                className=\"text-gray-500 hover:text-gray-700\"\r\n-              >\r\n-                ‚úï\r\n-              </button>\r\n-            </div>\r\n-\r\n-            {loadingAccesses ? (\r\n-              <div className=\"text-center py-8\">\r\n-                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"></div>\r\n-                <p className=\"mt-2 text-gray-600\">Cargando accesos...</p>\r\n-              </div>\r\n-            ) : (\r\n-              <div className=\"overflow-x-auto\">\r\n-                <table className=\"min-w-full divide-y divide-gray-200\">\r\n-                  <thead className=\"bg-gray-50\">\r\n-                    <tr>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Documento\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Nombre\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Ficha\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Tipo Acceso\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Fecha Entrada\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Fecha Salida\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Duraci√≥n (min)\r\n-                      </th>\r\n-                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n-                        Estado\r\n-                      </th>\r\n-                    </tr>\r\n-                  </thead>\r\n-                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n-                    {accesses.map((access) => (\r\n-                      <tr key={access.id_acceso} className=\"hover:bg-gray-50\">\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n-                          {access.documento}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n-                          {access.nombre_completo}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n-                          {access.ficha || 'N/A'}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm\">\r\n-                          <span className={`px-2 py-1 rounded text-xs ${\r\n-                            access.tipo_acceso === 'entrada'\r\n-                              ? 'bg-green-100 text-green-700'\r\n-                              : 'bg-blue-100 text-blue-700'\r\n-                          }`}>\r\n-                            {access.tipo_acceso === 'entrada' ? 'Entrada' : 'Salida'}\r\n-                          </span>\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n-                          {access.fecha_entrada\r\n-                            ? new Date(access.fecha_entrada).toLocaleString('es-CO')\r\n-                            : 'N/A'}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n-                          {access.fecha_salida\r\n-                            ? new Date(access.fecha_salida).toLocaleString('es-CO')\r\n-                            : 'En curso'}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n-                          {access.duracion_minutos || '-'}\r\n-                        </td>\r\n-                        <td className=\"px-4 py-3 text-sm\">\r\n-                          <span className={`px-2 py-1 rounded text-xs ${\r\n-                            access.estado === 'completado'\r\n-                              ? 'bg-green-100 text-green-700'\r\n-                              : 'bg-yellow-100 text-yellow-700'\r\n-                          }`}>\r\n-                            {access.estado || 'Pendiente'}\r\n-                          </span>\r\n-                        </td>\r\n-                      </tr>\r\n-                    ))}\r\n-                  </tbody>\r\n-                </table>\r\n-                {accesses.length === 0 && (\r\n-                  <div className=\"text-center py-8 text-gray-500\">\r\n-                    No hay accesos registrados para este programa en el per√≠odo seleccionado.\r\n-                  </div>\r\n-                )}\r\n-              </div>\r\n-            )}\r\n-          </div>\r\n-        )}\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default ProgramCatalog;\r\n-\r\n-\r\n+// ProgramCatalog - Cat√°logo de programas de formaci√≥n\n+import React, { useState, useEffect } from 'react';\n+import { catalogAPI } from '../services/api.js';\n+\n+const ProgramCatalog = () => {\n+  const [programs, setPrograms] = useState([]);\n+  const [loading, setLoading] = useState(true);\n+  const [filters, setFilters] = useState({\n+    nivel: '',\n+    area: '',\n+    estado: 'activo',\n+    search: ''\n+  });\n+  const [selectedProgram, setSelectedProgram] = useState(null);\n+  const [students, setStudents] = useState([]);\n+  const [loadingStudents, setLoadingStudents] = useState(false);\n+  const [accessProgram, setAccessProgram] = useState(null);\n+  const [accesses, setAccesses] = useState([]);\n+  const [loadingAccesses, setLoadingAccesses] = useState(false);\n+  const [notification, setNotification] = useState(null);\n+  const [showAddForm, setShowAddForm] = useState(false);\n+  const [programForm, setProgramForm] = useState({\n+    codigo_programa: '',\n+    nombre_programa: '',\n+    nivel: 'T√©cnico',\n+    area_conocimiento: '',\n+    duracion_meses: 12,\n+    descripcion: '',\n+    estado: 'activo'\n+  });\n+  const [formFeedback, setFormFeedback] = useState(null);\n+\n+  useEffect(() => {\n+    loadPrograms();\n+  }, [filters]);\n+\n+  const loadPrograms = async () => {\n+    try {\n+      setLoading(true);\n+      const result = await catalogAPI.getAllPrograms(filters);\n+      if (result.success) {\n+        setPrograms(result.data || []);\n+      }\n+    } catch (error) {\n+      console.error('Error cargando programas:', error);\n+    } finally {\n+      setLoading(false);\n+    }\n+  };\n+\n+  const handleFilterChange = (key, value) => {\n+    setFilters(prev => ({ ...prev, [key]: value }));\n+  };\n+\n+  const handleProgramClick = async (program) => {\n+    setSelectedProgram(program);\n+    setLoadingStudents(true);\n+    try {\n+      const result = await catalogAPI.getStudentsByProgram(program.codigo_programa);\n+      if (result.success) {\n+        setStudents(result.data || []);\n+      }\n+    } catch (error) {\n+      console.error('Error cargando estudiantes:', error);\n+    } finally {\n+      setLoadingStudents(false);\n+    }\n+  };\n+\n+  const handleViewAccess = async (program) => {\n+    setAccessProgram(program);\n+    setLoadingAccesses(true);\n+    setAccesses([]);\n+    setNotification(null);\n+    try {\n+      const result = await catalogAPI.getAccessByProgram(program.codigo_programa);\n+      if (result.success) {\n+        const accessData = result.data || [];\n+        setAccesses(accessData);\n+        \n+        // Mostrar notificaci√≥n si no hay accesos\n+        if (accessData.length === 0) {\n+          setNotification({\n+            type: 'info',\n+            message: 'No hay accesos registrados para este programa de formaci√≥n'\n+          });\n+          // Auto-cerrar la notificaci√≥n despu√©s de 5 segundos\n+          setTimeout(() => {\n+            setNotification(null);\n+          }, 5000);\n+        }\n+      } else {\n+        console.error('Error obteniendo accesos:', result.message);\n+        setAccesses([]);\n+        setNotification({\n+          type: 'error',\n+          message: result.message || 'Error al obtener accesos'\n+        });\n+        setTimeout(() => {\n+          setNotification(null);\n+        }, 5000);\n+      }\n+    } catch (error) {\n+      console.error('Error cargando accesos:', error);\n+      setAccesses([]);\n+      setNotification({\n+        type: 'error',\n+        message: 'Error al cargar los accesos del programa'\n+      });\n+      setTimeout(() => {\n+        setNotification(null);\n+      }, 5000);\n+    } finally {\n+      setLoadingAccesses(false);\n+    }\n+  };\n+\n+  const handleProgramFormChange = (field, value) => {\n+    setProgramForm(prev => ({ ...prev, [field]: value }));\n+  };\n+\n+  const handleProgramFormSubmit = async (event) => {\n+    event.preventDefault();\n+    setFormFeedback({ type: 'info', message: 'Guardando programa...' });\n+    try {\n+      const result = await catalogAPI.createProgram(programForm);\n+      if (result.success) {\n+        setFormFeedback({ type: 'success', message: 'Programa creado correctamente' });\n+        setProgramForm({\n+          codigo_programa: '',\n+          nombre_programa: '',\n+          nivel: 'T√©cnico',\n+          area_conocimiento: '',\n+          duracion_meses: 12,\n+          descripcion: '',\n+          estado: 'activo'\n+        });\n+        setShowAddForm(false);\n+        loadPrograms();\n+      } else {\n+        setFormFeedback({ type: 'error', message: result.message || 'No se pudo crear el programa' });\n+      }\n+    } catch (error) {\n+      console.error('Error creando programa:', error);\n+      setFormFeedback({ type: 'error', message: error.response?.data?.message || 'Error al crear el programa' });\n+    }\n+    setTimeout(() => setFormFeedback(null), 5000);\n+  };\n+\n+  return (\n+    <div className=\"min-h-screen bg-gray-50 p-6\">\n+      {/* Notificaci√≥n */}\n+      {notification && (\n+        <div \n+          className={`fixed top-4 right-4 z-50 max-w-md transform transition-all duration-300 ease-in-out ${\n+            notification.type === 'error' \n+              ? 'bg-red-50 border-red-400 text-red-800' \n+              : 'bg-blue-50 border-blue-400 text-blue-800'\n+          } border-2 rounded-lg shadow-lg p-4 flex items-start gap-3 animate-fade-in`}\n+          style={{\n+            animation: 'slideInRight 0.3s ease-out'\n+          }}\n+        >\n+          <div className=\"flex-shrink-0 text-xl\">\n+            {notification.type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}\n+          </div>\n+          <div className=\"flex-1\">\n+            <p className=\"font-semibold\">{notification.message}</p>\n+          </div>\n+          <button\n+            onClick={() => setNotification(null)}\n+            className=\"flex-shrink-0 text-gray-500 hover:text-gray-700 transition-colors\"\n+          >\n+            ‚úï\n+          </button>\n+          <style>{`\n+            @keyframes slideInRight {\n+              from {\n+                transform: translateX(100%);\n+                opacity: 0;\n+              }\n+              to {\n+                transform: translateX(0);\n+                opacity: 1;\n+              }\n+            }\n+            .animate-fade-in {\n+              animation: slideInRight 0.3s ease-out;\n+            }\n+          `}</style>\n+        </div>\n+      )}\n+      \n+      <div className=\"max-w-7xl mx-auto\">\n+        <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n+          <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">\n+            üìö Cat√°logo de Programas de Formaci√≥n - CBI Palmira\n+          </h1>\n+\n+          <div className=\"flex items-center justify-between mb-4 gap-4\">\n+            <h2 className=\"text-xl font-semibold text-gray-700\">Filtros r√°pidos</h2>\n+            <button\n+              onClick={() => setShowAddForm(prev => !prev)}\n+              className=\"text-sm bg-green-600 text-white px-3 py-1 rounded transition hover:bg-green-700\"\n+            >\n+              {showAddForm ? 'Cancelar nuevo programa' : 'Agregar programa manualmente'}\n+            </button>\n+          </div>\n+\n+          {showAddForm && (\n+            <div className=\"bg-gray-50 border border-green-200 rounded-lg p-4 mb-6\">\n+              <form onSubmit={handleProgramFormSubmit} className=\"space-y-3\">\n+                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n+                  <input\n+                    type=\"text\"\n+                    value={programForm.codigo_programa}\n+                    onChange={(e) => handleProgramFormChange('codigo_programa', e.target.value)}\n+                    placeholder=\"C√≥digo del programa\"\n+                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n+                    required\n+                  />\n+                  <input\n+                    type=\"text\"\n+                    value={programForm.nombre_programa}\n+                    onChange={(e) => handleProgramFormChange('nombre_programa', e.target.value)}\n+                    placeholder=\"Nombre del programa\"\n+                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n+                    required\n+                  />\n+                  <input\n+                    type=\"number\"\n+                    min={1}\n+                    value={programForm.duracion_meses}\n+                    onChange={(e) => handleProgramFormChange('duracion_meses', parseInt(e.target.value, 10))}\n+                    placeholder=\"Duraci√≥n meses\"\n+                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n+                    required\n+                  />\n+                </div>\n+                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n+                  <select\n+                    value={programForm.nivel}\n+                    onChange={(e) => handleProgramFormChange('nivel', e.target.value)}\n+                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n+                  >\n+                    <option value=\"T√©cnico\">T√©cnico</option>\n+                    <option value=\"Tecnol√≥gico\">Tecnol√≥gico</option>\n+                    <option value=\"Especializaci√≥n\">Especializaci√≥n</option>\n+                    <option value=\"Complementaria\">Complementaria</option>\n+                  </select>\n+                  <input\n+                    type=\"text\"\n+                    value={programForm.area_conocimiento}\n+                    onChange={(e) => handleProgramFormChange('area_conocimiento', e.target.value)}\n+                    placeholder=\"√Årea de conocimiento\"\n+                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n+                  />\n+                  <select\n+                    value={programForm.estado}\n+                    onChange={(e) => handleProgramFormChange('estado', e.target.value)}\n+                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n+                  >\n+                    <option value=\"activo\">Activo</option>\n+                    <option value=\"inactivo\">Inactivo</option>\n+                  </select>\n+                </div>\n+                <textarea\n+                  value={programForm.descripcion}\n+                  onChange={(e) => handleProgramFormChange('descripcion', e.target.value)}\n+                  placeholder=\"Descripci√≥n breve\"\n+                  rows={2}\n+                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n+                />\n+                <div className=\"flex items-center gap-3\">\n+                  <button\n+                    type=\"submit\"\n+                    className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md font-semibold\"\n+                  >\n+                    Guardar programa\n+                  </button>\n+                  {formFeedback && (\n+                    <p className={`text-sm ${formFeedback.type === 'error' ? 'text-red-600' : 'text-green-600'}`}>\n+                      {formFeedback.message}\n+                    </p>\n+                  )}\n+                </div>\n+              </form>\n+            </div>\n+          )}\n+\n+          {/* Filtros */}\n+          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n+            <div>\n+              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n+                Nivel\n+              </label>\n+              <select\n+                value={filters.nivel}\n+                onChange={(e) => handleFilterChange('nivel', e.target.value)}\n+                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n+              >\n+                <option value=\"\">Todos</option>\n+                <option value=\"T√©cnico\">T√©cnico</option>\n+                <option value=\"Tecnol√≥gico\">Tecnol√≥gico</option>\n+                <option value=\"Especializaci√≥n\">Especializaci√≥n</option>\n+              </select>\n+            </div>\n+\n+            <div>\n+              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n+                √Årea de Conocimiento\n+              </label>\n+              <input\n+                type=\"text\"\n+                value={filters.area}\n+                onChange={(e) => handleFilterChange('area', e.target.value)}\n+                placeholder=\"Ej: Desarrollo de Software\"\n+                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n+              />\n+            </div>\n+\n+            <div>\n+              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n+                Estado\n+              </label>\n+              <select\n+                value={filters.estado}\n+                onChange={(e) => handleFilterChange('estado', e.target.value)}\n+                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n+              >\n+                <option value=\"\">Todos</option>\n+                <option value=\"activo\">Activo</option>\n+                <option value=\"inactivo\">Inactivo</option>\n+              </select>\n+            </div>\n+\n+            <div>\n+              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n+                Buscar\n+              </label>\n+              <input\n+                type=\"text\"\n+                value={filters.search}\n+                onChange={(e) => handleFilterChange('search', e.target.value)}\n+                placeholder=\"C√≥digo o nombre...\"\n+                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n+              />\n+            </div>\n+          </div>\n+\n+          {/* Lista de programas */}\n+          {loading ? (\n+            <div className=\"text-center py-12\">\n+              <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n+              <p className=\"mt-4 text-gray-600\">Cargando programas...</p>\n+            </div>\n+          ) : (\n+            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n+              {programs.map((program) => (\n+                <div\n+                  key={program.id_programa}\n+                  className=\"border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer\"\n+                  onClick={() => handleProgramClick(program)}\n+                >\n+                  <div className=\"flex justify-between items-start mb-2\">\n+                    <span className=\"text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded\">\n+                      {program.codigo_programa}\n+                    </span>\n+                    <span className={`text-xs px-2 py-1 rounded ${\n+                      program.nivel === 'T√©cnico' \n+                        ? 'bg-green-100 text-green-700' \n+                        : 'bg-purple-100 text-purple-700'\n+                    }`}>\n+                      {program.nivel}\n+                    </span>\n+                  </div>\n+                  <h3 className=\"font-semibold text-gray-800 mb-2\">\n+                    {program.nombre_programa}\n+                  </h3>\n+                  <p className=\"text-sm text-gray-600 mb-2\">\n+                    <span className=\"font-medium\">√Årea:</span> {program.area_conocimiento}\n+                  </p>\n+                  <p className=\"text-sm text-gray-600\">\n+                    <span className=\"font-medium\">Duraci√≥n:</span> {program.duracion_meses} meses\n+                  </p>\n+                  <div className=\"mt-3 flex gap-2\">\n+                    <button\n+                      onClick={(e) => {\n+                        e.stopPropagation();\n+                        handleViewAccess(program);\n+                      }}\n+                      className=\"text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600\"\n+                    >\n+                      Ver Accesos\n+                    </button>\n+                  </div>\n+                </div>\n+              ))}\n+            </div>\n+          )}\n+\n+          {!loading && programs.length === 0 && (\n+            <div className=\"text-center py-12 text-gray-500\">\n+              No se encontraron programas con los filtros seleccionados.\n+            </div>\n+          )}\n+        </div>\n+\n+        {/* Panel de estudiantes del programa seleccionado */}\n+        {selectedProgram && (\n+          <div className=\"bg-white rounded-lg shadow-md p-6 mt-6\">\n+            <div className=\"flex justify-between items-center mb-4\">\n+              <h2 className=\"text-2xl font-bold text-gray-800\">\n+                Aprendices - {selectedProgram.nombre_programa}\n+              </h2>\n+              <button\n+                onClick={() => setSelectedProgram(null)}\n+                className=\"text-gray-500 hover:text-gray-700\"\n+              >\n+                ‚úï\n+              </button>\n+            </div>\n+\n+            {loadingStudents ? (\n+              <div className=\"text-center py-8\">\n+                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"></div>\n+              </div>\n+            ) : (\n+              <div className=\"overflow-x-auto\">\n+                <table className=\"min-w-full divide-y divide-gray-200\">\n+                  <thead className=\"bg-gray-50\">\n+                    <tr>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Documento\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Nombre\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Ficha\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Estado\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        √öltimo Acceso\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Accesos (30 d√≠as)\n+                      </th>\n+                    </tr>\n+                  </thead>\n+                  <tbody className=\"bg-white divide-y divide-gray-200\">\n+                    {students.map((student) => (\n+                      <tr key={student.id_persona} className=\"hover:bg-gray-50\">\n+                        <td className=\"px-4 py-3 text-sm text-gray-900\">\n+                          {student.documento}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm text-gray-900\">\n+                          {student.nombre}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n+                          {student.ficha || 'N/A'}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm\">\n+                          <span className={`px-2 py-1 rounded text-xs ${\n+                            student.estado === 'activo'\n+                              ? 'bg-green-100 text-green-700'\n+                              : 'bg-red-100 text-red-700'\n+                          }`}>\n+                            {student.estado}\n+                          </span>\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n+                          {student.ultimo_acceso\n+                            ? new Date(student.ultimo_acceso).toLocaleDateString('es-CO')\n+                            : 'Nunca'}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n+                          {student.accesos_mes || 0}\n+                        </td>\n+                      </tr>\n+                    ))}\n+                  </tbody>\n+                </table>\n+                {students.length === 0 && (\n+                  <div className=\"text-center py-8 text-gray-500\">\n+                    No hay aprendices registrados en este programa.\n+                  </div>\n+                )}\n+              </div>\n+            )}\n+          </div>\n+        )}\n+\n+        {/* Panel de accesos del programa */}\n+        {accessProgram && (\n+          <div className=\"bg-white rounded-lg shadow-md p-6 mt-6\">\n+            <div className=\"flex justify-between items-center mb-4\">\n+              <h2 className=\"text-2xl font-bold text-gray-800\">\n+                Accesos - {accessProgram.nombre_programa}\n+              </h2>\n+              <button\n+                onClick={() => {\n+                  setAccessProgram(null);\n+                  setAccesses([]);\n+                }}\n+                className=\"text-gray-500 hover:text-gray-700\"\n+              >\n+                ‚úï\n+              </button>\n+            </div>\n+\n+            {loadingAccesses ? (\n+              <div className=\"text-center py-8\">\n+                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"></div>\n+                <p className=\"mt-2 text-gray-600\">Cargando accesos...</p>\n+              </div>\n+            ) : (\n+              <div className=\"overflow-x-auto\">\n+                <table className=\"min-w-full divide-y divide-gray-200\">\n+                  <thead className=\"bg-gray-50\">\n+                    <tr>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Documento\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Nombre\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Ficha\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Tipo Acceso\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Fecha Entrada\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Fecha Salida\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Duraci√≥n (min)\n+                      </th>\n+                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\n+                        Estado\n+                      </th>\n+                    </tr>\n+                  </thead>\n+                  <tbody className=\"bg-white divide-y divide-gray-200\">\n+                    {accesses.map((access) => (\n+                      <tr key={access.id_acceso} className=\"hover:bg-gray-50\">\n+                        <td className=\"px-4 py-3 text-sm text-gray-900\">\n+                          {access.documento}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm text-gray-900\">\n+                          {access.nombre_completo}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n+                          {access.ficha || 'N/A'}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm\">\n+                          <span className={`px-2 py-1 rounded text-xs ${\n+                            access.tipo_acceso === 'entrada'\n+                              ? 'bg-green-100 text-green-700'\n+                              : 'bg-blue-100 text-blue-700'\n+                          }`}>\n+                            {access.tipo_acceso === 'entrada' ? 'Entrada' : 'Salida'}\n+                          </span>\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n+                          {access.fecha_entrada\n+                            ? new Date(access.fecha_entrada).toLocaleString('es-CO')\n+                            : 'N/A'}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n+                          {access.fecha_salida\n+                            ? new Date(access.fecha_salida).toLocaleString('es-CO')\n+                            : 'En curso'}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n+                          {access.duracion_minutos || '-'}\n+                        </td>\n+                        <td className=\"px-4 py-3 text-sm\">\n+                          <span className={`px-2 py-1 rounded text-xs ${\n+                            access.estado === 'completado'\n+                              ? 'bg-green-100 text-green-700'\n+                              : 'bg-yellow-100 text-yellow-700'\n+                          }`}>\n+                            {access.estado || 'Pendiente'}\n+                          </span>\n+                        </td>\n+                      </tr>\n+                    ))}\n+                  </tbody>\n+                </table>\n+                {accesses.length === 0 && (\n+                  <div className=\"text-center py-8 text-gray-500\">\n+                    No hay accesos registrados para este programa en el per√≠odo seleccionado.\n+                  </div>\n+                )}\n+              </div>\n+            )}\n+          </div>\n+        )}\n+      </div>\n+    </div>\n+  );\n+};\n+\n+export default ProgramCatalog;\n+\n+\n"
                },
                {
                    "date": 1764310107444,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -200,11 +200,12 @@\n           <div className=\"flex items-center justify-between mb-4 gap-4\">\n             <h2 className=\"text-xl font-semibold text-gray-700\">Filtros r√°pidos</h2>\n             <button\n               onClick={() => setShowAddForm(prev => !prev)}\n-              className=\"text-sm bg-green-600 text-white px-3 py-1 rounded transition hover:bg-green-700\"\n+              className=\"text-sm bg-green-600 text-white px-3 py-1 rounded transition hover:bg-green-700 flex items-center gap-2\"\n             >\n-              {showAddForm ? 'Cancelar nuevo programa' : 'Agregar programa manualmente'}\n+              <span className=\"text-lg leading-none\">+</span>\n+              {showAddForm ? 'Cancelar nuevo programa' : 'Agregar Programa de formaci√≥n'}\n             </button>\n           </div>\n \n           {showAddForm && (\n"
                }
            ],
            "date": 1764110063756,
            "name": "Commit-0",
            "content": "// ProgramCatalog - Cat√°logo de programas de formaci√≥n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { catalogAPI } from '../services/api.js';\r\n\r\nconst ProgramCatalog = () => {\r\n  const [programs, setPrograms] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({\r\n    nivel: '',\r\n    area: '',\r\n    estado: 'activo',\r\n    search: ''\r\n  });\r\n  const [selectedProgram, setSelectedProgram] = useState(null);\r\n  const [students, setStudents] = useState([]);\r\n  const [loadingStudents, setLoadingStudents] = useState(false);\r\n  const [accessProgram, setAccessProgram] = useState(null);\r\n  const [accesses, setAccesses] = useState([]);\r\n  const [loadingAccesses, setLoadingAccesses] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadPrograms();\r\n  }, [filters]);\r\n\r\n  const loadPrograms = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const result = await catalogAPI.getAllPrograms(filters);\r\n      if (result.success) {\r\n        setPrograms(result.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error cargando programas:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    setFilters(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleProgramClick = async (program) => {\r\n    setSelectedProgram(program);\r\n    setLoadingStudents(true);\r\n    try {\r\n      const result = await catalogAPI.getStudentsByProgram(program.codigo_programa);\r\n      if (result.success) {\r\n        setStudents(result.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error cargando estudiantes:', error);\r\n    } finally {\r\n      setLoadingStudents(false);\r\n    }\r\n  };\r\n\r\n  const handleViewAccess = async (program) => {\r\n    setAccessProgram(program);\r\n    setLoadingAccesses(true);\r\n    setAccesses([]);\r\n    try {\r\n      const result = await catalogAPI.getAccessByProgram(program.codigo_programa);\r\n      if (result.success) {\r\n        setAccesses(result.data || []);\r\n      } else {\r\n        console.error('Error obteniendo accesos:', result.message);\r\n        setAccesses([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error cargando accesos:', error);\r\n      setAccesses([]);\r\n    } finally {\r\n      setLoadingAccesses(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-6\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\r\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">\r\n            üìö Cat√°logo de Programas de Formaci√≥n - CBI Palmira\r\n          </h1>\r\n\r\n          {/* Filtros */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Nivel\r\n              </label>\r\n              <select\r\n                value={filters.nivel}\r\n                onChange={(e) => handleFilterChange('nivel', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"\">Todos</option>\r\n                <option value=\"T√©cnico\">T√©cnico</option>\r\n                <option value=\"Tecnol√≥gico\">Tecnol√≥gico</option>\r\n                <option value=\"Especializaci√≥n\">Especializaci√≥n</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                √Årea de Conocimiento\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={filters.area}\r\n                onChange={(e) => handleFilterChange('area', e.target.value)}\r\n                placeholder=\"Ej: Desarrollo de Software\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Estado\r\n              </label>\r\n              <select\r\n                value={filters.estado}\r\n                onChange={(e) => handleFilterChange('estado', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"\">Todos</option>\r\n                <option value=\"activo\">Activo</option>\r\n                <option value=\"inactivo\">Inactivo</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Buscar\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={filters.search}\r\n                onChange={(e) => handleFilterChange('search', e.target.value)}\r\n                placeholder=\"C√≥digo o nombre...\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Lista de programas */}\r\n          {loading ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\r\n              <p className=\"mt-4 text-gray-600\">Cargando programas...</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              {programs.map((program) => (\r\n                <div\r\n                  key={program.id_programa}\r\n                  className=\"border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer\"\r\n                  onClick={() => handleProgramClick(program)}\r\n                >\r\n                  <div className=\"flex justify-between items-start mb-2\">\r\n                    <span className=\"text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded\">\r\n                      {program.codigo_programa}\r\n                    </span>\r\n                    <span className={`text-xs px-2 py-1 rounded ${\r\n                      program.nivel === 'T√©cnico' \r\n                        ? 'bg-green-100 text-green-700' \r\n                        : 'bg-purple-100 text-purple-700'\r\n                    }`}>\r\n                      {program.nivel}\r\n                    </span>\r\n                  </div>\r\n                  <h3 className=\"font-semibold text-gray-800 mb-2\">\r\n                    {program.nombre_programa}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-600 mb-2\">\r\n                    <span className=\"font-medium\">√Årea:</span> {program.area_conocimiento}\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    <span className=\"font-medium\">Duraci√≥n:</span> {program.duracion_meses} meses\r\n                  </p>\r\n                  <div className=\"mt-3 flex gap-2\">\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleViewAccess(program);\r\n                      }}\r\n                      className=\"text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600\"\r\n                    >\r\n                      Ver Accesos\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {!loading && programs.length === 0 && (\r\n            <div className=\"text-center py-12 text-gray-500\">\r\n              No se encontraron programas con los filtros seleccionados.\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Panel de estudiantes del programa seleccionado */}\r\n        {selectedProgram && (\r\n          <div className=\"bg-white rounded-lg shadow-md p-6 mt-6\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h2 className=\"text-2xl font-bold text-gray-800\">\r\n                Aprendices - {selectedProgram.nombre_programa}\r\n              </h2>\r\n              <button\r\n                onClick={() => setSelectedProgram(null)}\r\n                className=\"text-gray-500 hover:text-gray-700\"\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n\r\n            {loadingStudents ? (\r\n              <div className=\"text-center py-8\">\r\n                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"></div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                  <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Documento\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Nombre\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Ficha\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Estado\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        √öltimo Acceso\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Accesos (30 d√≠as)\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {students.map((student) => (\r\n                      <tr key={student.id_persona} className=\"hover:bg-gray-50\">\r\n                        <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n                          {student.documento}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n                          {student.nombre}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n                          {student.ficha || 'N/A'}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm\">\r\n                          <span className={`px-2 py-1 rounded text-xs ${\r\n                            student.estado === 'activo'\r\n                              ? 'bg-green-100 text-green-700'\r\n                              : 'bg-red-100 text-red-700'\r\n                          }`}>\r\n                            {student.estado}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n                          {student.ultimo_acceso\r\n                            ? new Date(student.ultimo_acceso).toLocaleDateString('es-CO')\r\n                            : 'Nunca'}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n                          {student.accesos_mes || 0}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n                {students.length === 0 && (\r\n                  <div className=\"text-center py-8 text-gray-500\">\r\n                    No hay aprendices registrados en este programa.\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Panel de accesos del programa */}\r\n        {accessProgram && (\r\n          <div className=\"bg-white rounded-lg shadow-md p-6 mt-6\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h2 className=\"text-2xl font-bold text-gray-800\">\r\n                Accesos - {accessProgram.nombre_programa}\r\n              </h2>\r\n              <button\r\n                onClick={() => {\r\n                  setAccessProgram(null);\r\n                  setAccesses([]);\r\n                }}\r\n                className=\"text-gray-500 hover:text-gray-700\"\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n\r\n            {loadingAccesses ? (\r\n              <div className=\"text-center py-8\">\r\n                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"></div>\r\n                <p className=\"mt-2 text-gray-600\">Cargando accesos...</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                  <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Documento\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Nombre\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Ficha\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Tipo Acceso\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Fecha Entrada\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Fecha Salida\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Duraci√≥n (min)\r\n                      </th>\r\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">\r\n                        Estado\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {accesses.map((access) => (\r\n                      <tr key={access.id_acceso} className=\"hover:bg-gray-50\">\r\n                        <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n                          {access.documento}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n                          {access.nombre_completo}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n                          {access.ficha || 'N/A'}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm\">\r\n                          <span className={`px-2 py-1 rounded text-xs ${\r\n                            access.tipo_acceso === 'entrada'\r\n                              ? 'bg-green-100 text-green-700'\r\n                              : 'bg-blue-100 text-blue-700'\r\n                          }`}>\r\n                            {access.tipo_acceso === 'entrada' ? 'Entrada' : 'Salida'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n                          {access.fecha_entrada\r\n                            ? new Date(access.fecha_entrada).toLocaleString('es-CO')\r\n                            : 'N/A'}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n                          {access.fecha_salida\r\n                            ? new Date(access.fecha_salida).toLocaleString('es-CO')\r\n                            : 'En curso'}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\r\n                          {access.duracion_minutos || '-'}\r\n                        </td>\r\n                        <td className=\"px-4 py-3 text-sm\">\r\n                          <span className={`px-2 py-1 rounded text-xs ${\r\n                            access.estado === 'completado'\r\n                              ? 'bg-green-100 text-green-700'\r\n                              : 'bg-yellow-100 text-yellow-700'\r\n                          }`}>\r\n                            {access.estado || 'Pendiente'}\r\n                          </span>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n                {accesses.length === 0 && (\r\n                  <div className=\"text-center py-8 text-gray-500\">\r\n                    No hay accesos registrados para este programa en el per√≠odo seleccionado.\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgramCatalog;\r\n\r\n\r\n"
        }
    ]
}